import json

def parse_test_scenarios(file_path):
    with open(file_path, 'r') as file:
        lines = file.readlines()
    
    test_cases = {"TC.NO": {}, "Test Description": {}, "Test Steps": {}, "Expected Results": {}}
    case_number = 0  # Initialize test case number
    current_key = None
    
    for line in lines:
        line = line.strip()
        
        # Detect Test Scenario
        if line.startswith("Test Scenario"):
            case_number += 1  # Increment case number
            test_cases["TC.NO"][str(case_number)] = 1.0  # Add TC.NO entry
            
        # Detect Test Description
        elif line.startswith("Test Description:"):
            current_key = "Test Description"
            test_cases[current_key][str(case_number)] = ""
        
        # Detect Test Steps
        elif line.startswith("Test Steps:"):
            current_key = "Test Steps"
            test_cases[current_key][str(case_number)] = ""
        
        # Detect Expected Result
        elif line.startswith("Expected Result:"):
            current_key = "Expected Results"
            test_cases[current_key][str(case_number)] = ""
        
        # Populate the current key with the next line of text
        elif current_key and case_number > 0:
            if test_cases[current_key][str(case_number)] == "":
                test_cases[current_key][str(case_number)] = line
            else:
                test_cases[current_key][str(case_number)] += " " + line

    # Fill null values for missing test cases
    max_case = case_number
    for key in ["Test Description", "Test Steps", "Expected Results"]:
        for i in range(1, max_case + 1):
            if str(i) not in test_cases[key]:
                test_cases[key][str(i)] = None
    
    return test_cases

def save_to_json(data, output_path):
    with open(output_path, 'w') as file:
        json.dump(data, file, indent=4)

# Main program
input_file = 'FAT-480 best steps.txt'  # Replace with your file name
output_file = 'temp.json'

parsed_data = parse_test_scenarios(input_file)
save_to_json(parsed_data, output_file)

print(f"JSON file saved to {output_file}")
