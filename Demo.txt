# memo.py

import uuid
import datetime
import json

class Memo:
    def __init__(self, request_json):
        self.memo_id = uuid.uuid4()
        self.user_id = request_json.get("user_id")
        self.client_name = request_json.get("client_name")
        self.template_type = request_json.get("template_type")
        self.updated_at = datetime.datetime.now()

        self.memo_title = None
        self.meeting_details_json = None
        self.client_details_json = None

        if self.template_type == "client_memo":
            self.memo_title = request_json.get("memo_title")
            meeting_details = request_json.get("meeting_details")
            self.meeting_details_json = json.dumps(meeting_details)
        else:
            key_areas = request_json.get("key_areas_for_discussion")
            key_contact = request_json.get("client_key_contact")
            self.client_details_json = json.dumps({
                "key_areas_for_discussion": key_areas,
                "key_client_contacts": key_contact
            })
